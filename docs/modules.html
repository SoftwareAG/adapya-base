

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Package Reference &mdash; adapya-base 1.3.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/SAG2015.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Indices" href="indices.html" />
    <link rel="prev" title="Scripts" href="scripts.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> adapya-base
          

          
            
            <img src="_static/SAG2015.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="users_guide.html">Using adapya-base</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Scripts</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Package Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#defs-basic-definitions-for-adapya">defs - Basic definitions for adapya</a></li>
<li class="toctree-l2"><a class="reference internal" href="#conv-text-conversion-routines">conv - Text conversion routines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#datamap-map-memory-structures-to-class-attributes">datamap - Map Memory Structures to Class Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dtconv-date-and-time-conversion-functions">dtconv - Date and Time conversion functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dump-buffer-hex-display-functions">dump - Buffer hex display functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ecscodec-mapping-ecs-encodings-to-python-codecs">ecscodec - mapping ECS encodings to Python codecs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ftptoolz-module">ftptoolz module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#jobs">Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pds-dataset">PDS dataset</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#jconfig-manage-configuration-data-in-a-json-file">jconfig - Manage configuration data in a JSON file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#recordio-read-and-write-records">recordio - read and write records</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stck-stck-timestamp-format-conversion-routines">stck - STCK timestamp format conversion routines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#touch-set-modification-time-of-file-s">touch - set modification time of file(s)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="indices.html">Indices</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">adapya-base</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Package Reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/modules.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-adapya.base.defs">
<span id="package-reference"></span><h1>Package Reference<a class="headerlink" href="#module-adapya.base.defs" title="Permalink to this headline">¶</a></h1>
<div class="section" id="defs-basic-definitions-for-adapya">
<h2>defs - Basic definitions for adapya<a class="headerlink" href="#defs-basic-definitions-for-adapya" title="Permalink to this headline">¶</a></h2>
<p>The module defs.py in the adapya.base package defines basic functionality
for the adapya packages</p>
<ul class="simple">
<li><p>Abuf class (read/write buffer) provides byte buffers with read and write
access funtions</p></li>
<li><p>Logging</p></li>
<li><p>dummymutex for synchronizing printing and logging</p></li>
</ul>
<dl class="py function">
<dt id="adapya.base.defs.Abuf">
<code class="sig-prename descclassname">adapya.base.defs.</code><code class="sig-name descname">Abuf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">init</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">'utf-8'</span></em>, <em class="sig-param"><span class="n">errors</span><span class="o">=</span><span class="default_value">'strict'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/defs.html#Abuf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.defs.Abuf" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a read/write buffer similar to a bytearray.
This factory function returns a Cbuf object.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">param init</dt>
<dd class="field-odd"><p>a buffer size &gt; 0 or an initial nonempty
string or unicode string which determines the size
of the buffer.</p>
</dd>
<dt class="field-even">param encoding</dt>
<dd class="field-even"><p>standard encoding encode string to binary
string, default is ‘utf-8’</p>
</dd>
</dl>
</div></blockquote>
<p>Some Abuf use examples (Python2):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">=</span><span class="n">Abuf</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;DEFG&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">value</span>
<span class="go">b&#39;abcDEFG&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">raw</span>
<span class="go">b&#39;abcDEFG\x00\x00\x00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>
<span class="go">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">b&#39;abc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">&#39;DEFG&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">b&#39;a&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="go">b&#39;abc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span><span class="o">=</span><span class="sa">b</span><span class="s1">&#39;1234567&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">value</span>
<span class="go">b&#39;abc1234567&#39;</span>
</pre></div>
</div>
<p>Some examples (Python3):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">e</span><span class="o">=</span><span class="n">Abuf</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;cp037&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span><span class="o">.</span><span class="n">value</span>
<span class="go">b&#39;\xc1\xc2\xc3123&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span><span class="o">.</span><span class="n">raw</span>
<span class="go">b&#39;\xc1\xc2\xc3123\x00\x00\x00\x00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;ABC&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">b&#39;123&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">b&#39;Á&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="go">b&#39;ÁÂÃ&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py exception">
<dt id="adapya.base.defs.ProgrammingError">
<em class="property">exception </em><code class="sig-prename descclassname">adapya.base.defs.</code><code class="sig-name descname">ProgrammingError</code><a class="reference internal" href="_modules/adapya/base/defs.html#ProgrammingError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.defs.ProgrammingError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="adapya.base.defs.evalb">
<code class="sig-prename descclassname">adapya.base.defs.</code><code class="sig-name descname">evalb</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/defs.html#evalb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.defs.evalb" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates string for single byte escape sequences</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>byte string</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">evalb</span><span class="p">(</span><span class="s1">&#39;ABCäÿ&#39;</span><span class="p">)</span>
<span class="go">b&#39;ABCäÿ&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In PY3 no unicode escapes can be used,
use evals() for that purpose.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.defs.evals">
<code class="sig-prename descclassname">adapya.base.defs.</code><code class="sig-name descname">evals</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/defs.html#evals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.defs.evals" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates string for unicode escape sequences</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">evals</span><span class="p">(</span><span class="s1">&#39;ABCäÿ&#39;</span><span class="p">)</span>
<span class="go">&#39;ABCäÿ&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">evals</span><span class="p">(</span><span class="s1">&#39;ABCäÿ&#39;</span><span class="p">)</span>
<span class="go">&#39;ABCäÿ&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In PY3 no escaped single bytes can be defined in strings
- they are mapped to unicode characters.</p>
<p>use evalb() for that purpose.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.defs.log">
<code class="sig-prename descclassname">adapya.base.defs.</code><code class="sig-name descname">log</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">logparm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/defs.html#log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.defs.log" title="Permalink to this definition">¶</a></dt>
<dd><p>set adapya.base interface log options</p>
</dd></dl>

</div>
<span class="target" id="module-adapya.base.conv"></span><div class="section" id="conv-text-conversion-routines">
<h2>conv - Text conversion routines<a class="headerlink" href="#conv-text-conversion-routines" title="Permalink to this headline">¶</a></h2>
<p>The module conv.py contains several conversion routines for ASCII/EBCDIC
conversion and byte swapping.</p>
<p>Character set is Latin1 per default with cp37 as EBCDIC
and cp819 (ISO-8859-1) as extended ASCII code pages.</p>
<p>The following conversions are defined:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="mi">37</span> <span class="o">&lt;=&gt;</span> <span class="mi">819</span>
<span class="mi">1047</span> <span class="o">&lt;=&gt;</span> <span class="mi">819</span>
<span class="mi">1141</span> <span class="o">&lt;=&gt;</span> <span class="mi">1252</span>
</pre></div>
</div>
<dl class="py function">
<dt id="adapya.base.conv.asc2ebc">
<code class="sig-prename descclassname">adapya.base.conv.</code><code class="sig-name descname">asc2ebc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buf</span></em>, <em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">stop</span></em>, <em class="sig-param"><span class="n">senco</span><span class="o">=</span><span class="default_value">819</span></em>, <em class="sig-param"><span class="n">tenco</span><span class="o">=</span><span class="default_value">37</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/conv.html#asc2ebc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.conv.asc2ebc" title="Permalink to this definition">¶</a></dt>
<dd><p>convert ASCII bytes in buffer to EBCDIC</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> – buffer</p></li>
<li><p><strong>start</strong> – start offset in buf</p></li>
<li><p><strong>stop</strong> – ending offset in buf</p></li>
<li><p><strong>senco</strong> – <p>source ASCII encoding. Supported are:</p>
<p>819 (Latin1 ISO-8859-1) or 1252 (Windows Latin1)</p>
</p></li>
<li><p><strong>tenco</strong> – <p>target EBCDIC encoding. Supported are:</p>
<p>37 (US EBCDIC Latin1) or 1141 (US EBCDIC with Euro)</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.conv.ebc2asc">
<code class="sig-prename descclassname">adapya.base.conv.</code><code class="sig-name descname">ebc2asc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buf</span></em>, <em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">stop</span></em>, <em class="sig-param"><span class="n">senco</span><span class="o">=</span><span class="default_value">37</span></em>, <em class="sig-param"><span class="n">tenco</span><span class="o">=</span><span class="default_value">819</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/conv.html#ebc2asc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.conv.ebc2asc" title="Permalink to this definition">¶</a></dt>
<dd><p>convert EBCDIC bytes in buffer to ASCII</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> – buffer</p></li>
<li><p><strong>start</strong> – start offset in buf</p></li>
<li><p><strong>stop</strong> – ending offset in buf</p></li>
<li><p><strong>senco</strong> – <p>source EBCDIC encoding. Supported code pages</p>
<p>37 (US EBCDIC Latin1) or 1141 (US EBCDIC with Euro)</p>
</p></li>
<li><p><strong>tenco</strong> – <p>target ASCII encoding. Supported code</p>
<p>819 (Latin1 ISO-8859-1) or 1252 (Windows Latin1)</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.conv.str2asc">
<code class="sig-prename descclassname">adapya.base.conv.</code><code class="sig-name descname">str2asc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">istr</span></em>, <em class="sig-param"><span class="n">senco</span><span class="o">=</span><span class="default_value">37</span></em>, <em class="sig-param"><span class="n">tenco</span><span class="o">=</span><span class="default_value">819</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/conv.html#str2asc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.conv.str2asc" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate bytes in bytes, bytearray or string
to target encoding and return bytes string</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.conv.str2ebc">
<code class="sig-prename descclassname">adapya.base.conv.</code><code class="sig-name descname">str2ebc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">istr</span></em>, <em class="sig-param"><span class="n">senco</span><span class="o">=</span><span class="default_value">819</span></em>, <em class="sig-param"><span class="n">tenco</span><span class="o">=</span><span class="default_value">37</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/conv.html#str2ebc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.conv.str2ebc" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate bytes in bytes, bytearray or  string
to target encoding</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">str2ebc</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;ABC&#39;</span><span class="p">)</span>
<span class="go">b&#39;ÁÂÃ&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abc</span><span class="o">=</span><span class="nb">bytearray</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;Latin1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">str2ebc</span><span class="p">(</span><span class="n">abc</span><span class="p">)</span>
<span class="go">bytearray(b&#39;ÁÂÃ&#39;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">str2ebc</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">)</span>
<span class="go">b&#39;ÁÂÃ&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.conv.str2uni">
<code class="sig-prename descclassname">adapya.base.conv.</code><code class="sig-name descname">str2uni</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">b</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/conv.html#str2uni"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.conv.str2uni" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert bytes string to unicode string.
The length of the input string s must be even otherwise
a ValueError exception is raised.</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.conv.swap">
<code class="sig-prename descclassname">adapya.base.conv.</code><code class="sig-name descname">swap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/conv.html#swap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.conv.swap" title="Permalink to this definition">¶</a></dt>
<dd><p>swap string, bytes or bytesarray</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.conv.uni2str">
<code class="sig-prename descclassname">adapya.base.conv.</code><code class="sig-name descname">uni2str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">u</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/conv.html#uni2str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.conv.uni2str" title="Permalink to this definition">¶</a></dt>
<dd><p>convert unicode string to bytes string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>u</strong> – string</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bytes string</p>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-adapya.base.datamap"></span><div class="section" id="datamap-map-memory-structures-to-class-attributes">
<h2>datamap - Map Memory Structures to Class Attributes<a class="headerlink" href="#datamap-map-memory-structures-to-class-attributes" title="Permalink to this headline">¶</a></h2>
<p>The datamap.py module defines the Datamap class which allows to
map record or memory structures to class attributes</p>
<dl class="py function">
<dt id="adapya.base.datamap.Bytes">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">Bytes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">size</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">options</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Bytes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Byte string (binary)</p>
</dd></dl>

<dl class="py class">
<dt id="adapya.base.datamap.Datamap">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">Datamap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dmname</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">fieldlist</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Datamap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Datamap" title="Permalink to this definition">¶</a></dt>
<dd><p>Datamap maps attributes to fields located in buffer+offset.</p>
<p>This is similar to a struct in C and involves un-/packing to/from
Python objects.</p>
<p>It is used to handle data structures external to Python.</p>
<p>Internally, attributes are defined as tuples per field list parameter
and stored as keys in the dict ‘keydict’ that contains tuples of</p>
<blockquote>
<div><ul class="simple">
<li><p>data_type,</p></li>
<li><p>slice_start,</p></li>
<li><p>slice_length,</p></li>
<li><p>read/write ability</p></li>
<li><p>function or method to convert to readable string</p></li>
</ul>
</div></blockquote>
<p>The sequence of fields is maintained in the the list ‘keylist’</p>
<p>Attribute tuples are generated with a list of data type specific
functions. Each defines the attribute name and other field options</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">adapya.base.defs</span> <span class="kn">import</span> <span class="n">Abuf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">adapya.base.datamap</span> <span class="kn">import</span> <span class="n">Datamap</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">Int2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Datamap</span><span class="p">(</span> <span class="s1">&#39;mymap&#39;</span><span class="p">,</span><span class="n">String</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span><span class="n">Int2</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">buffer</span><span class="o">=</span><span class="n">Abuf</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">bar</span><span class="o">=</span><span class="mi">255</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;abcdef&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span> <span class="n">g</span><span class="o">.</span><span class="n">foo</span><span class="p">)</span>         <span class="c1"># attribute access</span>
<span class="go">abcdef</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dump</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>      <span class="c1"># contents of buffer</span>
<span class="go">Buffer</span>
<span class="go"> 0000 61626364 6566FF00                   abcdef..         /ÂÄÀÁÃ..</span>

</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%(foo)s</span><span class="s1"> and </span><span class="si">%(bar)d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">g</span><span class="p">)</span>        <span class="c1"># dictionary access</span>
<span class="go">abcdef and 255</span>
</pre></div>
</div>
<p>The following keywords are supported:</p>
<ul>
<li><p><strong>buffer</strong>  sets the buffer on which the datamap is mapped</p></li>
<li><p><strong>offset</strong>  defines the offset in the buffer where the datamap starts</p></li>
<li><p><strong>encoding</strong> sets the encoding to convert to/from Unicode (default ‘Latin1’)</p></li>
<li><p><strong>ebcdic</strong>  if True: Alpha strings are in EBCDIC (encoding will be set to ‘cp037’
if not encoding is not specified)</p></li>
<li><p><strong>byteOrder</strong> define byte order for whole datamap (NETWORKBO or NATIVEBO)</p></li>
<li><p><strong>occurs</strong>    multiple occurrence of datamap, e.g. PE group
is a fixed number or an occurrence function, for example</p>
<blockquote>
<div><p>occurs=lambda:m1.occ - is a reference the occurrence count</p>
</div></blockquote>
</li>
<li><p><strong>dmlen</strong></p></li>
<li><p><strong>varies</strong>   indicates variable field positions and lengths</p></li>
<li><p><strong>supermap</strong> enclosing datamap which provides defaults for buffer, offset etc.</p></li>
</ul>
<dl class="py method">
<dt id="adapya.base.datamap.Datamap.dprint">
<code class="sig-name descname">dprint</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">indent</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">proff</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">selectfields</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">skipnull</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">title</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Datamap.dprint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Datamap.dprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Print detail lines with all attributes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>proff</strong> – 1 = print offset when walking through buffers</p>
</dd>
<dt class="field-even">Parm selectfields</dt>
<dd class="field-even"><p>display only fields listed (optional)</p>
</dd>
<dt class="field-odd">Parm skipnull</dt>
<dd class="field-odd"><p>1 = do not display empty fields</p>
</dd>
<dt class="field-even">Parm title</dt>
<dd class="field-even"><p>title to display else datamap name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.datamap.Datamap.genfb">
<code class="sig-name descname">genfb</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Datamap.genfb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Datamap.genfb" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Format buffer from datamap with fields defining Adabas
field name with options fn</p>
<p>datamap instance must have field name <em>fn</em> added to the options
dict of each field</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>string with format buffer contents</p>
</dd>
</dl>
<p>Note: currently limited to normal fields - no PE/MU support</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">adapya.base.datamap</span> <span class="kn">import</span> <span class="n">Datamap</span><span class="p">,</span><span class="n">Int2</span><span class="p">,</span><span class="n">String</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Datamap</span><span class="p">(</span><span class="s1">&#39;mymap&#39;</span><span class="p">,</span><span class="n">String</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="n">fn</span><span class="o">=</span><span class="s1">&#39;AA&#39;</span><span class="p">),</span><span class="n">Int2</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span><span class="n">fn</span><span class="o">=</span><span class="s1">&#39;AB&#39;</span><span class="p">,</span><span class="n">occurs</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">genfb</span><span class="p">()</span>
<span class="go">&#39;AA,6,A,AB,2,F.&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.datamap.Datamap.getfndef">
<code class="sig-name descname">getfndef</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Datamap.getfndef"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Datamap.getfndef" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Adabas field definition from datamap</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>tuple Adabas (field name, length, format)
or None if name does not exist or field name not found</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Datamap</span><span class="p">(</span> <span class="s1">&#39;mymap&#39;</span><span class="p">,</span><span class="n">String</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="n">fn</span><span class="o">=</span><span class="s1">&#39;AA&#39;</span><span class="p">),</span><span class="n">Int2</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span><span class="n">fn</span><span class="o">=</span><span class="s1">&#39;AB&#39;</span><span class="p">)</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">getfndef</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="go">(&#39;AA&#39;, 6, &#39;A&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.datamap.Datamap.getpossiz">
<code class="sig-name descname">getpossiz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span></em>, <em class="sig-param"><span class="n">opt</span></em>, <em class="sig-param"><span class="n">fieldpos</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Datamap.getpossiz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Datamap.getpossiz" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine position and size in variable field or
occ. count before MU/PE field ( opt &amp; T_MUPE)</p>
<p>called from prepare()</p>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.datamap.Datamap.getsize">
<code class="sig-name descname">getsize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Datamap.getsize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Datamap.getsize" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>size of datamap</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.datamap.Datamap.items">
<code class="sig-name descname">items</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">selectfields</span><span class="o">=</span><span class="default_value">()</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Datamap.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Datamap.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Return list of name value pairs on the fields in datamap</p>
<blockquote>
<div><p>Restriction: no composite fields</p>
<dl class="field-list simple">
<dt class="field-odd">todo</dt>
<dd class="field-odd"><p>check if byte arrays/fields can be used when handling bytes</p>
</dd>
</dl>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">adapya.base.datamap</span> <span class="kn">import</span> <span class="n">Datamap</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">Int2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Datamap</span><span class="p">(</span> <span class="s1">&#39;mymap&#39;</span><span class="p">,</span><span class="n">String</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span><span class="n">Int2</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">adapya.base.defs</span> <span class="kn">import</span> <span class="n">Abuf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">buffer</span><span class="o">=</span><span class="n">Abuf</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">bar</span><span class="o">=</span><span class="mi">255</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;abcdef&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="go">[(&#39;foo&#39;, &#39;abcdef&#39;), (&#39;bar&#39;, 255)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.datamap.Datamap.lprint">
<code class="sig-name descname">lprint</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">header</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">indent</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">proff</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">selectfields</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">col1</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Datamap.lprint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Datamap.lprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Print line with all attributes in one line with</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>header</strong> – 1: print only header</p></li>
<li><p><strong>indent</strong> – Columns to indent (default = 0)</p></li>
<li><p><strong>proff</strong> – 1: print offset when walking through buffers</p></li>
<li><p><strong>selectfields</strong> – display only fields listed (optional)</p></li>
<li><p><strong>col1</strong> – prefix text as first column (use to add index numbers to line)
Header and detail line should pass same string length</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.datamap.Datamap.prepare">
<code class="sig-name descname">prepare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Datamap.prepare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Datamap.prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare datamap for field access.</p>
<p>This function must be called if datamap contains
variable fields or variable number of occurences.</p>
<p>It sets the exact field position [1] and size [2] in the field
definition list so that field access can use it.</p>
<p>For variable length fields position/size excludes the length part
initsize - stores the initial size (=0 for variable fields).</p>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.datamap.Datamap.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Datamap.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Datamap.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset attributes/key values of a datamap to default values
if buffer variable is set:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span> <span class="n">adac</span><span class="o">.</span><span class="n">cb</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.datamap.Datamap.rippledown">
<code class="sig-name descname">rippledown</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fun</span></em>, <em class="sig-param"><span class="n">parm</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Datamap.rippledown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Datamap.rippledown" title="Permalink to this definition">¶</a></dt>
<dd><p>apply function to lower datamaps
no data is returned</p>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.datamap.Datamap.setEbcdic">
<code class="sig-name descname">setEbcdic</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">yesno</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Datamap.setEbcdic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Datamap.setEbcdic" title="Permalink to this definition">¶</a></dt>
<dd><p>set String/Char data to EBDIC in datamap</p>
<p>This method also overrides any encoding with ‘cp037’ for EBCDIC or
‘Latin_1’ for not EBCDIC.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>yesno</strong> – 0 to switch to EBCDIC or 1 to switch to ASCII</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.datamap.Datamap.setfsize">
<code class="sig-name descname">setfsize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">newsize</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Datamap.setfsize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Datamap.setfsize" title="Permalink to this definition">¶</a></dt>
<dd><p>set new fieldsize
Note: offsets of the following fields are not adjusted!</p>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.datamap.Datamap.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">kviter</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Datamap.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Datamap.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update or set the attributes/keys of a datamap to the values
in the list given as list or iterable of (key, value) pairs
or as list of keyword=value itmes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kviter</strong> – list or iterable of ‘key’,value pairs</p></li>
<li><p><strong>kw</strong> – list of key=value</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span> <span class="n">empl</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Bell&#39;</span><span class="p">,</span><span class="n">first_name</span><span class="o">=</span><span class="s1">&#39;John&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="adapya.base.datamap.DatamapError">
<em class="property">exception </em><code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">DatamapError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">dmap</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#DatamapError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.DatamapError" title="Permalink to this definition">¶</a></dt>
<dd><p>Error Class for Datamap Exceptions</p>
<dl class="field-list simple">
<dt class="field-odd">Attr string</dt>
<dd class="field-odd"><p>Adabas response string</p>
</dd>
<dt class="field-even">Attr dmap</dt>
<dd class="field-even"><p>Datamap instance where the error occurred</p>
</dd>
</dl>
<p>Usage example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">DatamapError</span><span class="p">(</span><span class="s1">&#39;error text&#39;</span><span class="p">,</span> <span class="n">dmap</span><span class="p">)</span>
<span class="k">except</span> <span class="n">DatamapError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;DatamapError&#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
    <span class="n">dump</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">dmap</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.Filler">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">Filler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">size</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Filler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Filler" title="Permalink to this definition">¶</a></dt>
<dd><p>Byte filler</p>
</dd></dl>

<dl class="py class">
<dt id="adapya.base.datamap.Multiple">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">Multiple</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">supermap</span></em>, <em class="sig-param"><span class="n">superkey</span></em>, <em class="sig-param"><span class="n">occurs</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">submap</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Multiple"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Multiple" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize with Multiple(supermap, key, occurs [, submap])
if ‘occurs’ is a function it will be called in prepare()
to determine the actual occurrences before field access</p>
<p>This class is used internally when defining fields with occurs&gt;0</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.Periodic">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">Periodic</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dmap</span></em>, <em class="sig-param"><span class="n">occurs</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Periodic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Periodic" title="Permalink to this definition">¶</a></dt>
<dd><p>Define periodic group with a datamap dmap on the fields of the group
keywords for options:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>occurs</strong> – <p>number of repetitions of group, parameter may be a function.</p>
<p>If function returns -1 or -2: byte position(s) before
the field contain the actual count. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">occurs</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span>
</pre></div>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.Unicode">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">Unicode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">size</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">options</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#Unicode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.Unicode" title="Permalink to this definition">¶</a></dt>
<dd><p>size in unicode characters * 2 = size in bytes</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.bit_str">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">bit_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">b</span></em>, <em class="sig-param"><span class="n">istrList</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#bit_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.bit_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce readable print of integer or single byte input</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>b</strong> – byte or integer</p></li>
<li><p><strong>istrList</strong> – <p>list of tuples containing the bits
and the corresponding string.</p>
<p>Optionally a third element of a tuple may be a
string that is taken as default when the bits are
all not set.</p>
</p></li>
</ul>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">adapya.base.datamap</span> <span class="kn">import</span> <span class="n">bit_str</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span> <span class="n">bit_str</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x03</span><span class="s1">&#39;</span><span class="p">,[(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;one&#39;</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;two&#39;</span><span class="p">)]))</span>
<span class="go">one,two</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span> <span class="n">bit_str</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x03</span><span class="s1">&#39;</span><span class="p">,[(</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;three&#39;</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;one&#39;</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;two&#39;</span><span class="p">)]))</span>
<span class="go">three</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span> <span class="n">bit_str</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x06</span><span class="s1">&#39;</span><span class="p">,[(</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;three&#39;</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;one&#39;</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;two&#39;</span><span class="p">)]))</span>
<span class="go">two,X&#39;04&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">bit_str</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x86</span><span class="s1">&#39;</span><span class="p">,[(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;two&#39;</span><span class="p">),(</span><span class="mh">0x80</span><span class="p">,</span><span class="s1">&#39;negative&#39;</span><span class="p">,</span><span class="s1">&#39;positive&#39;</span><span class="p">)])</span>
<span class="go">&quot;two,negative,X&#39;04&#39;&quot;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">bit_str</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x00</span><span class="s1">&#39;</span><span class="p">,[(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;two&#39;</span><span class="p">),(</span><span class="mh">0x80</span><span class="p">,</span><span class="s1">&#39;negative&#39;</span><span class="p">,</span><span class="s1">&#39;positive&#39;</span><span class="p">)])</span>
<span class="go">&#39;positive&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.dunpack">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">dunpack</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dmap</span></em>, <em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">indx</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">possiz</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#dunpack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.dunpack" title="Permalink to this definition">¶</a></dt>
<dd><p>datamap unpack</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> – if index is &gt; 0: indexed access with constant field size&gt;0
if possiz not given</p></li>
<li><p><strong>possiz</strong> – list of (pos, size) tuple indexed by index</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.field">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">field</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">fmt</span></em>, <em class="sig-param"><span class="n">size</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">options</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#field"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.field" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a field element.</p>
<p>A field element is used in the list of fields in a datamap class.
It defines mainly name, format and size.</p>
<p>Valid keywords for options i.e. keyword = value list:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>opt</strong> – <p>define extra formatting e.g. (T_STCK, T_HEX) - see also below
on variable length strings</p>
<p>To define fields in other data architecture:</p>
<ul>
<li><p><strong>T_EBCDIC</strong>  field data is in EBCDIC (String, Packed, Unpacked, Char)</p></li>
<li><p><strong>T_NWBO</strong>    field data is big-endian or high-order-byte-first
rather than native byte-order</p></li>
</ul>
<p>To define this for all fields in a datamap use the setting on the
datamap level:</p>
<blockquote>
<div><p>Datamap(…, ebcdic=1, byteorder=NETWORKBO)</p>
</div></blockquote>
<p>To define variable length strings:</p>
<blockquote>
<div><p>opt in (T_VAR0, T_VAR1, T_VAR2, T_VAR4)</p>
</div></blockquote>
<p>for AAL length reference, 1, 2, 4 byte length prefix</p>
<p>To cumulate options join them with bitwise-or ‘|’</p>
</p></li>
<li><p><strong>fn</strong> – define Adabas field name. This is used in genfb() and
getfndef() functions to generate the format buffer related
to the datamap.</p></li>
<li><p><strong>pos</strong> – define <strong>new offset</strong> from start of datamap</p></li>
<li><p><strong>repos</strong> – reposition <strong>relative</strong> from current position</p></li>
<li><p><strong>caption</strong> – field text for dprint() or lprint()</p></li>
<li><p><strong>ppfunc</strong> – formatting function for dprint()</p></li>
<li><p><strong>colsize</strong> – column size for lprint()</p></li>
<li><p><strong>dt</strong> – ‘DATETIME’ (= Adabas datetime editmask) is used to map
to/from Python datetime object (currently only DATETIME)</p></li>
<li><p><strong>sizefunc</strong> – reference to size function if T_VAR0 (AAL)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.flag_str">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">flag_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">flag</span></em>, <em class="sig-param"><span class="n">flist</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#flag_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.flag_str" title="Permalink to this definition">¶</a></dt>
<dd><p>This is similar to bit_str but only lists the elements
for which a definition exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flag</strong> – integer</p></li>
<li><p><strong>flist</strong> – list of (integer, string) tuples</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flag_str</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;one&#39;</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;two&#39;</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="s1">&#39;four&#39;</span><span class="p">)))</span>
<span class="go">&#39;one,two&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.flag_strc">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">flag_strc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">flag</span></em>, <em class="sig-param"><span class="n">flist</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#flag_strc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.flag_strc" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to flag_str but compressed i.e. without commas
each flag bit is represented by a string or a ‘.’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flag</strong> – integer</p></li>
<li><p><strong>flist</strong> – list of (integer, string) tuples</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flag_strc</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;O&#39;</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;T&#39;</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="s1">&#39;F&#39;</span><span class="p">)))</span>
<span class="go">&#39;O.F&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.fndef2datamap">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">fndef2datamap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">fndef</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#fndef2datamap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.fndef2datamap" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Fieldmap class from a fndef list
:param fndef: list of fndef tuples
:param name: class name to be returned</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.fpack">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">fpack</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">format</span></em>, <em class="sig-param"><span class="n">length</span></em>, <em class="sig-param"><span class="n">byteorder</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ebcdic</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#fpack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.fpack" title="Permalink to this definition">¶</a></dt>
<dd><p>Pack number to byte string in one of the following
number representations/formats supported by Adabas:</p>
<blockquote>
<div><p>Unpacked, Packed, Binary, Fixpoint, unsigned integer ‘u’</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – number (int/long)</p></li>
<li><p><strong>format</strong> – ‘U’, ‘P’, ‘B’, ‘F’, ‘u’</p></li>
<li><p><strong>length</strong> – allowed are for U:1-30, P:1-15, B:1-126, F:1,2,4,8
u:1,2,4,8</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string in PY2 and bytes in PY3</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">adapya.base.datamap</span> <span class="kn">import</span> <span class="n">fpack</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fpack</span><span class="p">(</span><span class="mi">234</span><span class="p">,</span><span class="s1">&#39;P&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;#L&#39;</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.funpack">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">funpack</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bstring</span></em>, <em class="sig-param"><span class="n">format</span></em>, <em class="sig-param"><span class="n">byteorder</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ebcdic</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#funpack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.funpack" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpacks number from byte string in one of the following
number representations/formats supported by Adabas:</p>
<blockquote>
<div><p>Unpacked, Packed, Binary, Fixpoint</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – Byte string</p></li>
<li><p><strong>format</strong> – ‘U’, ‘P’, ‘B’, and ‘F’ plus ‘u’ unsigned</p></li>
<li><p><strong>byteorder</strong> – NETWORKBO or NATIVEBO (defined in datamap)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number (int/long) for ‘U’, ‘P’, ‘F’ and ‘u’
or byte string for ‘B’</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">adapya.base.datamap</span> <span class="kn">import</span> <span class="n">funpack</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">funpack</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;#M&#39;</span><span class="p">,</span><span class="s1">&#39;P&#39;</span><span class="p">)</span>
<span class="go">-234</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.list_str">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">list_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">i</span></em>, <em class="sig-param"><span class="n">istrList</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#list_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.list_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce readable print from list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong> – position in list</p></li>
<li><p><strong>istrList</strong> – List of strings</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.list_stri">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">list_stri</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">i</span></em>, <em class="sig-param"><span class="n">istrList</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#list_stri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.list_stri" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce readable print from list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong> – position in list</p></li>
<li><p><strong>istrList</strong> – List of strings</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.prd2dm">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">prd2dm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prdformat</span></em>, <em class="sig-param"><span class="n">length</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#prd2dm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.prd2dm" title="Permalink to this definition">¶</a></dt>
<dd><p>get Datamap field code from Predict format</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.setEbcdic">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">setEbcdic</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">yesno</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#setEbcdic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.setEbcdic" title="Permalink to this definition">¶</a></dt>
<dd><p>set EBCDIC data in map
:param yesno: True or False</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.datamap.str_str">
<code class="sig-prename descclassname">adapya.base.datamap.</code><code class="sig-name descname">str_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s</span></em>, <em class="sig-param"><span class="n">strdict</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/datamap.html#str_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.datamap.str_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a readable string from the value
if it exists otherwise the hex value for integers or blank</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s</strong> – value (could be string or int: key for dict)</p></li>
<li><p><strong>strdict</strong> – dict containing the interpretation</p></li>
</ul>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">str_str</span><span class="p">(</span><span class="s1">&#39;quark&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;quark&#39;</span><span class="p">:</span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="s1">&#39;two&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">:</span><span class="s1">&#39;four&#39;</span><span class="p">})</span>
<span class="go">&#39;one&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">str_str</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="s1">&#39;two&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">:</span><span class="s1">&#39;four&#39;</span><span class="p">})</span>
<span class="go">&quot;X&#39;03&#39;&quot;</span>
</pre></div>
</div>
</dd></dl>

</div>
<span class="target" id="module-adapya.base.dtconv"></span><div class="section" id="dtconv-date-and-time-conversion-functions">
<h2>dtconv - Date and Time conversion functions<a class="headerlink" href="#dtconv-date-and-time-conversion-functions" title="Permalink to this headline">¶</a></h2>
<p>The module adapya.base.dtconv contains various routines to convert
datetime values between various formats.</p>
<p>For Gregorian to Julian date conversions and vice versa see</p>
<blockquote>
<div><p><a class="reference external" href="http://en.wikipedia.org/wiki/Julian_day#Calculation">http://en.wikipedia.org/wiki/Julian_day#Calculation</a></p>
</div></blockquote>
<dl class="py exception">
<dt id="adapya.base.dtconv.InvalidDateException">
<em class="property">exception </em><code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">InvalidDateException</code><a class="reference internal" href="_modules/adapya/base/dtconv.html#InvalidDateException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.InvalidDateException" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.checkdate">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">checkdate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span></em>, <em class="sig-param"><span class="n">month</span></em>, <em class="sig-param"><span class="n">day</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#checkdate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.checkdate" title="Permalink to this definition">¶</a></dt>
<dd><p>Check Gregorian date given as year, month, day</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#adapya.base.dtconv.InvalidDateException" title="adapya.base.dtconv.InvalidDateException"><strong>InvalidDateException</strong></a> – if invalid input values are given
otherwise returns silently</p>
</dd>
</dl>
<p>Invalid date raises exception:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">checkdate</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">32</span><span class="p">)</span>   
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">InvalidDateException</span>: <span class="n">day 32 not in range 1..31</span>
</pre></div>
</div>
<p>Valid dates go trough quiet:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">checkdate</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">31</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.clock_time">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">clock_time</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">resync</span><span class="o">=</span><span class="default_value">300</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#clock_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.clock_time" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>resync</strong> – interval for resyncing with time()</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>high resolution time</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.date2natdate">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">date2natdate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span></em>, <em class="sig-param"><span class="n">month</span></em>, <em class="sig-param"><span class="n">day</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#date2natdate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.date2natdate" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a gregorian date to a natdate integer</p>
<p>No checking is done for valid dates. Natural
does not allow dates earlier than 1582-01-01</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">date2natdate</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">365</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date2natdate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">-1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date2natdate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date2natdate</span><span class="p">(</span><span class="mi">1900</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">693960</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date2natdate</span><span class="p">(</span><span class="mi">1582</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">577813</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date2natdate</span><span class="p">(</span><span class="mi">1970</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">719527</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date2natdate</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">730484</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date2natdate</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">31</span><span class="p">)</span>
<span class="go">733771</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date2natdate</span><span class="p">(</span><span class="mi">9999</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">31</span><span class="p">)</span>
<span class="go">3652423</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.dt2str">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">dt2str</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">dt</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#dt2str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.dt2str" title="Permalink to this definition">¶</a></dt>
<dd><p>make a datetime string from a datetime tuple</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dt2str</span><span class="p">(</span> <span class="mi">2010</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="mi">13</span><span class="p">)</span>
<span class="go">&#39;20100430115513&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.dt2strf">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">dt2strf</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">dt</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#dt2strf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.dt2strf" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dt2strf</span><span class="p">(</span> <span class="mi">2010</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
<span class="go">&#39;2010-04-30 11:55:13&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span><span class="o">=</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">44</span><span class="p">,</span><span class="mi">55</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt2strf</span><span class="p">(</span> <span class="o">*</span><span class="n">d1</span><span class="p">)</span>
<span class="go">&#39;2010-01-02 11:44:55&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.greg2jdn">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">greg2jdn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span></em>, <em class="sig-param"><span class="n">month</span></em>, <em class="sig-param"><span class="n">day</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#greg2jdn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.greg2jdn" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the Julian day number for a proleptic gregorian date:</p>
<p>November 24, 4714 BC  is Julian day 0 at noon</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.gx2utc">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">gx2utc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">halfhours</span></em>, <em class="sig-param"><span class="n">microsecs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#gx2utc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.gx2utc" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert intermediate timestamp of two 32 bit integers to utc form:</p>
<blockquote>
<div><p>year,month,day,hour,minute,second,microsecond</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>halfhours</strong> – number of halfhours since the epoch 0000-01-02</p></li>
<li><p><strong>microsecs</strong> – number of microseconds within half hour</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gx2utc</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>                     <span class="c1"># 0000-01-02 00:00:00.000000</span>
<span class="go">(0, 1, 2, 0, 0, 0, 0)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gx2utc</span><span class="p">(</span><span class="mi">175316351</span><span class="p">,</span><span class="mi">1799999999</span><span class="p">)</span>    <span class="c1"># 9999-12-31 23:59:59.999999</span>
<span class="go">(9999, 12, 31, 23, 59, 59, 999999)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gx2utc</span><span class="p">(</span><span class="mi">34537296</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>              <span class="c1"># 1970-01-01 00:00:00.000000</span>
<span class="go">(1970, 1, 1, 0, 0, 0, 0)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gx2utc</span><span class="p">(</span><span class="mi">35221034</span><span class="p">,</span><span class="mi">1259123456</span><span class="p">)</span>     <span class="c1"># UTC2008SAMPLE</span>
<span class="go">(2008, 12, 31, 13, 20, 59, 123456)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.jdn2greg">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">jdn2greg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">jdn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#jdn2greg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.jdn2greg" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate gregorian year, month, day from julian day number.</p>
<p>astronomical year numbering year 0 is 1 B.C., -1 is 2 B.C. etc.</p>
<p>Even though the first day in the Julian calendar correctly starts
at noon rather than on midnight here we assume it to start
at midnight (12 hours earlier)</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.jdn2jul">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">jdn2jul</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">jdn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#jdn2jul"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.jdn2jul" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate julian year, month, day from julian day number</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.jul2jdn">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">jul2jdn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span></em>, <em class="sig-param"><span class="n">month</span></em>, <em class="sig-param"><span class="n">day</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#jul2jdn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.jul2jdn" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Julian day number from julian date</p>
<ul class="simple">
<li><p>Earliest supported date is March 1, -4800</p></li>
<li><p>1 BC is year 0, 2 BC is -1 etc. (astronomical year numbering)</p></li>
<li><p>Julian year starts at 1. March</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.micro2nattime">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">micro2nattime</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mic</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#micro2nattime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.micro2nattime" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert microseconds since 0001-01-01
to NATTIME Value in 10th of second precision</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.micro2utc">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">micro2utc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">microsecs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#micro2utc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.micro2utc" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert seconds since epoch value to list composed of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">year</span><span class="p">,</span><span class="n">month</span><span class="p">,</span><span class="n">day</span><span class="p">,</span><span class="n">hour</span><span class="p">,</span><span class="n">minute</span><span class="p">,</span><span class="n">second</span><span class="p">,</span><span class="n">microsecond</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>microsec</strong> – number of microseconds since the epoch 0001-01-01</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">micro2utc</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                    <span class="c1"># 0001-01-01 00:00:00.000000</span>
<span class="go">(1, 1, 1, 0, 0, 0, 0)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">micro2utc</span><span class="p">(</span><span class="mi">315537897599999999</span><span class="p">)</span>  <span class="c1"># 9999-12-31 23:59:59.999999</span>
<span class="go">(9999, 12, 31, 23, 59, 59, 999999)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">micro2utc</span><span class="p">(</span><span class="mi">62135596800000000</span><span class="p">)</span>   <span class="c1"># 1970-01-01 00:00:00.000000</span>
<span class="go">(1970, 1, 1, 0, 0, 0, 0)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">micro2utc</span><span class="p">(</span><span class="mi">63366326459123456</span><span class="p">)</span>   <span class="c1"># UTC2008SAMPLE</span>
<span class="go">(2008, 12, 31, 13, 20, 59, 123456)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.natdate2nattime">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">natdate2nattime</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nd</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#natdate2nattime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.natdate2nattime" title="Permalink to this definition">¶</a></dt>
<dd><p>convert NATDATE counting days since Jan. 2, 0000 to
NATTIME Value in 10th of second precision</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.nattime2micro">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">nattime2micro</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nt</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#nattime2micro"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.nattime2micro" title="Permalink to this definition">¶</a></dt>
<dd><p>convert NATTIME Value in 10th of second precision to
microseconds since 1.1.1</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.nattime2natdate">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">nattime2natdate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nt</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#nattime2natdate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.nattime2natdate" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert NATTIME Value in 10th of second precision to
NATDATE couning days since Jan. 2, 0000</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.nattime2utc">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">nattime2utc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nt</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#nattime2utc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.nattime2utc" title="Permalink to this definition">¶</a></dt>
<dd><p>convert NATTIME Value in 10th of second precision to
DATETIME value</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.sec2interval">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">sec2interval</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">seconds</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#sec2interval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.sec2interval" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert seconds to tuple of day, hour, minute and second</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>seconds</strong> – integer</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple day, hour, minute, second</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.sec2utc">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">sec2utc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">seconds</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#sec2utc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.sec2utc" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert seconds since epoch value to tuple composed of</p>
<blockquote>
<div><p>year,month,day,hour,minute,second</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>seconds</strong> – number of seconds since the epoch 0001-01-01
if a float value is given:
fraction of seconds yield microseconds</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.str2dt">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">str2dt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ds</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#str2dt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.str2dt" title="Permalink to this definition">¶</a></dt>
<dd><p>make a datetime tuple from a datetime string or number</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">str2dt</span><span class="p">(</span> <span class="s1">&#39;20160229115513&#39;</span> <span class="p">)</span>
<span class="go">(2016, 2, 29, 11, 55, 13)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">str2dt</span><span class="p">(</span> <span class="sa">b</span><span class="s1">&#39;20160301235513&#39;</span> <span class="p">)</span>
<span class="go">(2016, 3, 1, 23, 55, 13)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.testgreg2jdn">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">testgreg2jdn</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#testgreg2jdn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.testgreg2jdn" title="Permalink to this definition">¶</a></dt>
<dd><p>Conversion of seconds to gregorian date</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.ts2strf">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">ts2strf</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">ts</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#ts2strf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.ts2strf" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ts2strf</span><span class="p">(</span> <span class="mi">2010</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">999999</span><span class="p">)</span>
<span class="go">&#39;2010-04-30 11:55:13.999999&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.unix2utc">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">unix2utc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">seconds</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#unix2utc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.unix2utc" title="Permalink to this definition">¶</a></dt>
<dd><p>same as sec2utc() only with epoch 1970-01-01</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.utc2gx">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">utc2gx</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">secmsec</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#utc2gx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.utc2gx" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list composed of year,month,day,hour,minute,second,microsecond
to gx format list of two 32 bit integers (halfhours, microsecs) since epoch 0000-01-02</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>secmsec</strong> – list of year,month,day,hour,minute,second,microsecond</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(halfhours, microsecs) since epoch 0000-01-02</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.utc2micro">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">utc2micro</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">secmsec</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#utc2micro"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.utc2micro" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list composed of year,month,day,hour,minute,second,microsecond</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>secmsec</strong> – list of year,month,day,hour,minute,second,microsecond</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of microseconds since the epoch 0001-01-01 00:00:00.000000</p>
</dd>
</dl>
<p>XTIMESTAMP(epoch 0001)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">utc2micro</span><span class="p">(</span><span class="o">*</span><span class="n">UTCMIN</span><span class="p">)</span>           <span class="c1"># 0001-01-01 00:00:00.000000</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">utc2micro</span><span class="p">(</span><span class="o">*</span><span class="n">UTCMAX</span><span class="p">)</span>    <span class="c1"># 9999-12-31 23:59:59.999999</span>
<span class="go">&#39;315537897599999999&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">utc2micro</span><span class="p">(</span><span class="o">*</span><span class="n">UTC1970</span><span class="p">)</span>   <span class="c1"># 1970-01-01 00:00:00.000000</span>
<span class="go">&#39;62135596800000000&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">utc2micro</span><span class="p">(</span><span class="o">*</span><span class="n">UTC2008SAMPLE</span><span class="p">)</span>    <span class="c1"># 2008-12-31 13:20:59.123456</span>
<span class="go">&#39;63366326459123456&#39;</span>
</pre></div>
</div>
<p>XTIMESTAMP(epoch 1970)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">utc2micro</span><span class="p">(</span><span class="o">*</span><span class="n">UTCMIN</span><span class="p">)</span><span class="o">-</span><span class="n">utc2micro</span><span class="p">(</span><span class="o">*</span><span class="n">UTC1970</span><span class="p">))</span>
<span class="go">&#39;-62135596800000000&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">utc2micro</span><span class="p">(</span><span class="o">*</span><span class="n">UTCMAX</span><span class="p">)</span><span class="o">-</span><span class="n">utc2micro</span><span class="p">(</span><span class="o">*</span><span class="n">UTC1970</span><span class="p">))</span>
<span class="go">&#39;253402300799999999&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">utc2micro</span><span class="p">(</span><span class="o">*</span><span class="n">UTC1970</span><span class="p">)</span><span class="o">-</span><span class="n">utc2micro</span><span class="p">(</span><span class="o">*</span><span class="n">UTC1970</span><span class="p">))</span>
<span class="go">&#39;0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">utc2micro</span><span class="p">(</span><span class="o">*</span><span class="n">UTC2008SAMPLE</span><span class="p">)</span><span class="o">-</span><span class="n">utc2micro</span><span class="p">(</span><span class="o">*</span><span class="n">UTC1970</span><span class="p">))</span>
<span class="go">&#39;1230729659123456&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.utc2nattime">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">utc2nattime</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">secmsec</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#utc2nattime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.utc2nattime" title="Permalink to this definition">¶</a></dt>
<dd><p>convert utc timestamp since 0001-01-01
to NATTIME Value in 10th of second precision</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.utc2sec">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">utc2sec</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">utc</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#utc2sec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.utc2sec" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list composed of year,month,day,hour,minute,second [,microsec]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>utc</strong> – list of year,month,day,hour,minute,second</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of seconds since the epoch 0001-01-01</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.utc2unix">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">utc2unix</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">utc</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#utc2unix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.utc2unix" title="Permalink to this definition">¶</a></dt>
<dd><p>same as sec2utc() only with epoch 1970-01-01</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.utc2xts">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">utc2xts</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">secmsec</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#utc2xts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.utc2xts" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list composed of year,month,day,hour,minute,second,microsecond
to XTIMESTAMP (UNIXTIME in microsecond precision)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>secmsec</strong> – list of year,month,day,hour,minute,second,microsecond</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of microseconds since the epoch 1970-01-01 00:00:00.000000</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.xtimestamp2timestamp">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">xtimestamp2timestamp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mics</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#xtimestamp2timestamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.xtimestamp2timestamp" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">xtimestamp2timestamp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(1970, 1, 1, 0, 0, 0, 0)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dtconv.xts2utc">
<code class="sig-prename descclassname">adapya.base.dtconv.</code><code class="sig-name descname">xts2utc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">microseconds</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dtconv.html#xts2utc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dtconv.xts2utc" title="Permalink to this definition">¶</a></dt>
<dd><p>same as micro2utc() only with epoch 1970-01-01</p>
</dd></dl>

</div>
<span class="target" id="module-adapya.base.dump"></span><div class="section" id="dump-buffer-hex-display-functions">
<h2>dump - Buffer hex display functions<a class="headerlink" href="#dump-buffer-hex-display-functions" title="Permalink to this headline">¶</a></h2>
<p>This module contains buffer storage display functions</p>
<ul class="simple">
<li><p>most notably dump() used for logging buffers</p></li>
<li><p>classes/methods for reversing readable SYSUDUMP data
into virtual storage</p></li>
<li><p>diffdump for printing differences in buffers using difflib</p></li>
</ul>
<dl class="py function">
<dt id="adapya.base.dump.diffbin">
<code class="sig-prename descclassname">adapya.base.dump.</code><code class="sig-name descname">diffbin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">a</span></em>, <em class="sig-param"><span class="n">b</span></em>, <em class="sig-param"><span class="n">header1</span><span class="o">=</span><span class="default_value">'Buffer1'</span></em>, <em class="sig-param"><span class="n">header2</span><span class="o">=</span><span class="default_value">'Buffer2'</span></em>, <em class="sig-param"><span class="n">startaddr</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dump.html#diffbin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dump.diffbin" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary difference printer for buffer objects a and b</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dump.diffdump">
<code class="sig-prename descclassname">adapya.base.dump.</code><code class="sig-name descname">diffdump</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buf1</span></em>, <em class="sig-param"><span class="n">buf2</span></em>, <em class="sig-param"><span class="n">header1</span><span class="o">=</span><span class="default_value">'Buffer 1'</span></em>, <em class="sig-param"><span class="n">header2</span><span class="o">=</span><span class="default_value">'Buffer 2'</span></em>, <em class="sig-param"><span class="n">startaddr</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dump.html#diffdump"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dump.diffdump" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the difference of 2 buffers</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dump.dump">
<code class="sig-prename descclassname">adapya.base.dump.</code><code class="sig-name descname">dump</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buf</span></em>, <em class="sig-param"><span class="n">header</span><span class="o">=</span><span class="default_value">'Buffer'</span></em>, <em class="sig-param"><span class="n">prefix</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">startaddr</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ecodec</span><span class="o">=</span><span class="default_value">'cp037'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dump.html#dump"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dump.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>print or log buffer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> – string, bytestring or bytearray</p></li>
<li><p><strong>ecodec</strong> – ebcdic codec name for ebcdic printable characters</p></li>
<li><p><strong>startaddr</strong> – dump lines will be prefixed with given start address plus offset
as absolute address rather than relative offset from buffer start</p></li>
</ul>
</dd>
</dl>
<p>Example to write warning to logger adalog:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dump</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">log</span><span class="o">=</span><span class="n">adalog</span><span class="o">.</span><span class="n">warning</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dump.hex2buf">
<code class="sig-prename descclassname">adapya.base.dump.</code><code class="sig-name descname">hex2buf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hexbuf</span></em><span class="sig-paren">)</span><a class="headerlink" href="#adapya.base.dump.hex2buf" title="Permalink to this definition">¶</a></dt>
<dd><p>convert hexadecimal input ‘hexbuf’ to buffer string
blanks and CR LF are suppressed</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dump.hex3buf">
<code class="sig-prename descclassname">adapya.base.dump.</code><code class="sig-name descname">hex3buf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hexbuf</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dump.html#hex3buf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dump.hex3buf" title="Permalink to this definition">¶</a></dt>
<dd><p>convert TSO interpreted hex screen to buffer
input must contain triple of interpreted and 2 hex lines
where each column is one character</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dump.hexRbuf">
<code class="sig-prename descclassname">adapya.base.dump.</code><code class="sig-name descname">hexRbuf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hexbuf</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dump.html#hexRbuf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dump.hexRbuf" title="Permalink to this definition">¶</a></dt>
<dd><p>interpret printed hex printed buffers in various formats
formats: TSO print</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dump.ishexstr">
<code class="sig-prename descclassname">adapya.base.dump.</code><code class="sig-name descname">ishexstr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/dump.html#ishexstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.dump.ishexstr" title="Permalink to this definition">¶</a></dt>
<dd><p>test string str for being all hexadecimal characters</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.dump.txt2buf">
<code class="sig-prename descclassname">adapya.base.dump.</code><code class="sig-name descname">txt2buf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">txt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#adapya.base.dump.txt2buf" title="Permalink to this definition">¶</a></dt>
<dd><p>convert text input ‘txt’ that may be split over several lines to string
blanks and CR LF are suppressed</p>
</dd></dl>

</div>
<span class="target" id="module-adapya.base.ecscodec"></span><div class="section" id="ecscodec-mapping-ecs-encodings-to-python-codecs">
<h2>ecscodec - mapping ECS encodings to Python codecs<a class="headerlink" href="#ecscodec-mapping-ecs-encodings-to-python-codecs" title="Permalink to this headline">¶</a></h2>
<p>ECS is the acronym for Entire Conversion Services, a text conversion
library used with Adabas.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>currently not all ECS encodings and Python codecs are listed.
Non-existent codepage numbers could be mapped to the
Python encodings per default ‘cp%d’ % i</p>
</div>
<dl class="py function">
<dt id="adapya.base.ecscodec.getcodec">
<code class="sig-prename descclassname">adapya.base.ecscodec.</code><code class="sig-name descname">getcodec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ecskey</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ecscodec.html#getcodec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ecscodec.getcodec" title="Permalink to this definition">¶</a></dt>
<dd><p>return the Python codec name given the ECS encoding key</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.ecscodec.getecs">
<code class="sig-prename descclassname">adapya.base.ecscodec.</code><code class="sig-name descname">getecs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">codec</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ecscodec.html#getecs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ecscodec.getecs" title="Permalink to this definition">¶</a></dt>
<dd><p>return the ECS encoding key given the Python codec name</p>
</dd></dl>

</div>
<span class="target" id="module-adapya.base.ftptoolz"></span><div class="section" id="ftptoolz-module">
<h2>ftptoolz module<a class="headerlink" href="#ftptoolz-module" title="Permalink to this headline">¶</a></h2>
<p>The Ftpzos class in ftptoolz contains z/OS specific methods for accessing the SPOOL and
datasets.</p>
<div class="section" id="jobs">
<h3>Jobs<a class="headerlink" href="#jobs" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>submit()</p></li>
<li><p>listjobs()</p></li>
<li><p>listjob()</p></li>
<li><p>deletejob()</p></li>
<li><p>getjoblines()</p></li>
</ul>
</div>
<div class="section" id="pds-dataset">
<h3>PDS dataset<a class="headerlink" href="#pds-dataset" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>memberinfo()</p></li>
<li><p>memberlines()</p></li>
<li><p>members()</p></li>
<li><p>getbinaryfile()</p></li>
<li><p>getfile()</p></li>
<li><p>getlines()</p></li>
<li><p>storemember()</p></li>
<li><p>touchmembers()</p></li>
</ul>
<p>ftptoolz modules requires Python V2.7 or higher</p>
<dl class="py class">
<dt id="adapya.base.ftptoolz.Dataset">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.ftptoolz.</code><code class="sig-name descname">Dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">volume</span></em>, <em class="sig-param"><span class="n">unit</span></em>, <em class="sig-param"><span class="n">referred</span></em>, <em class="sig-param"><span class="n">extents</span></em>, <em class="sig-param"><span class="n">used</span></em>, <em class="sig-param"><span class="n">recfm</span></em>, <em class="sig-param"><span class="n">lrecl</span></em>, <em class="sig-param"><span class="n">blksize</span></em>, <em class="sig-param"><span class="n">dsorg</span></em>, <em class="sig-param"><span class="n">dsname</span></em><span class="sig-paren">)</span><a class="headerlink" href="#adapya.base.ftptoolz.Dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>The namedtuple Dataset describes the information obtained from the z/OS ftp directory listing</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Dataset</span><span class="p">(</span><span class="s1">&#39;VSM033&#39;</span><span class="p">,</span><span class="s1">&#39;3390&#39;</span><span class="p">,</span><span class="s1">&#39;20120215&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;U&#39;</span><span class="p">,</span><span class="mi">6447</span><span class="p">,</span><span class="mi">6447</span><span class="p">,</span><span class="s1">&#39;PO&#39;</span><span class="p">,</span><span class="s1">&#39;ABC.LOAD&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example directories:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ARCIVE Not Direct Access Device                         VLOG.G0001V00
Dataset(&#39;ARCIVE&#39;,&#39;&#39;,&#39;&#39;,1,10,&#39;&#39;,0,0,&#39;&#39;,&#39;VLOG.G0001V00&#39;)
                                                   GDG  NEW.VLOG
VSM002 3390   2012/09/12  1   15  VB   27994 27998  PS  NEW.VLOG.G0115V00
VSM123 3390   **NONE**    1   45  ?        0     0 NONE NEW.VLOG.G0120V00
                                                   VSAM MOON.DDIR
VSM007 3390                                        VSAM MOON.DDIR.D
</pre></div>
</div>
<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Dataset.blksize">
<code class="sig-name descname">blksize</code><a class="headerlink" href="#adapya.base.ftptoolz.Dataset.blksize" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 7</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Dataset.dsname">
<code class="sig-name descname">dsname</code><a class="headerlink" href="#adapya.base.ftptoolz.Dataset.dsname" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 9</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Dataset.dsorg">
<code class="sig-name descname">dsorg</code><a class="headerlink" href="#adapya.base.ftptoolz.Dataset.dsorg" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 8</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Dataset.extents">
<code class="sig-name descname">extents</code><a class="headerlink" href="#adapya.base.ftptoolz.Dataset.extents" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Dataset.lrecl">
<code class="sig-name descname">lrecl</code><a class="headerlink" href="#adapya.base.ftptoolz.Dataset.lrecl" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 6</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Dataset.recfm">
<code class="sig-name descname">recfm</code><a class="headerlink" href="#adapya.base.ftptoolz.Dataset.recfm" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 5</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Dataset.referred">
<code class="sig-name descname">referred</code><a class="headerlink" href="#adapya.base.ftptoolz.Dataset.referred" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Dataset.unit">
<code class="sig-name descname">unit</code><a class="headerlink" href="#adapya.base.ftptoolz.Dataset.unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Dataset.used">
<code class="sig-name descname">used</code><a class="headerlink" href="#adapya.base.ftptoolz.Dataset.used" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Dataset.volume">
<code class="sig-name descname">volume</code><a class="headerlink" href="#adapya.base.ftptoolz.Dataset.volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="adapya.base.ftptoolz.DatasetsPDSspecifiedError">
<em class="property">exception </em><code class="sig-prename descclassname">adapya.base.ftptoolz.</code><code class="sig-name descname">DatasetsPDSspecifiedError</code><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#DatasetsPDSspecifiedError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.DatasetsPDSspecifiedError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="adapya.base.ftptoolz.Ftps">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.ftptoolz.</code><code class="sig-name descname">Ftps</code><span class="sig-paren">(</span><em class="sig-param">host=''</em>, <em class="sig-param">user=''</em>, <em class="sig-param">passwd=''</em>, <em class="sig-param">acct=''</em>, <em class="sig-param">keyfile=None</em>, <em class="sig-param">certfile=None</em>, <em class="sig-param">context=None</em>, <em class="sig-param">timeout=&lt;object object&gt;</em>, <em class="sig-param">source_address=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftps" title="Permalink to this definition">¶</a></dt>
<dd><p>Explicit FTPS, with shared TLS session (needs Python &gt; 3.6 ?)
to avoid ssl.SSLEOFError: EOF occurred in violation of protocol (_ssl.c:2746)
see <a class="reference external" href="https://stackoverflow.com/questions/14659154/ftpes-session-reuse-required">https://stackoverflow.com/questions/14659154/ftpes-session-reuse-required</a></p>
<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftps.ntransfercmd">
<code class="sig-name descname">ntransfercmd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmd</span></em>, <em class="sig-param"><span class="n">rest</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftps.ntransfercmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftps.ntransfercmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiate a transfer over the data connection.</p>
<p>If the transfer is active, send a port command and the
transfer command, and accept the connection.  If the server is
passive, send a pasv command, connect to it, and start the
transfer command.  Either way, return the socket for the
connection and the expected size of the transfer.  The
expected size may be None if it could not be determined.</p>
<p>Optional <a href="#id1"><span class="problematic" id="id2">`</span></a>rest’ argument can be a string that is sent as the
argument to a REST command.  This is essentially a server
marker used to tell the server to skip over any data up to the
given marker.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="adapya.base.ftptoolz.Ftpzos">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.ftptoolz.</code><code class="sig-name descname">Ftpzos</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">host</span></em>, <em class="sig-param"><span class="n">user</span></em>, <em class="sig-param"><span class="n">passwd</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">test</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">certfile</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">'latin1'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos" title="Permalink to this definition">¶</a></dt>
<dd><p>wraps ftplib.FTP with specific z/OS functions like
submitting jobs and reading JES spool</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tools.ftptoolz</span> <span class="kn">import</span> <span class="n">Ftpzos</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftp</span> <span class="o">=</span> <span class="n">Ftpzos</span><span class="p">(</span><span class="s1">&#39;host&#39;</span><span class="p">,</span><span class="s1">&#39;user&#39;</span><span class="p">,</span><span class="s1">&#39;password&#39;</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.datasets">
<code class="sig-name descname">datasets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dsnprefix</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.datasets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>generator function yields catalog information for each dataset
found under prefix returning a Dataset() tuple</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dsnprefix</strong> – read file or pds member</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.deletejob">
<code class="sig-name descname">deletejob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">jobid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.deletejob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.deletejob" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete Job identified by jobid</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>jobid</strong> – e.g. ‘JOB12345’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.getbinaryfile">
<code class="sig-name descname">getbinaryfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">outfile</span></em>, <em class="sig-param"><span class="n">rdw</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.getbinaryfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.getbinaryfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy binary file from ftp to file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – read file or pds member</p></li>
<li><p><strong>outfile</strong> – output file to receive contents</p></li>
<li><p><strong>rdw</strong> – if true transfers file with variable records being prefixed
with the RDW word (Int2 record length inclusive, 2 bytes dummy)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.getfile">
<code class="sig-name descname">getfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">outfile</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">xlate</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">cmp</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.getfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.getfile" title="Permalink to this definition">¶</a></dt>
<dd><p>copy text file from ftp to file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – read file or pds member</p></li>
<li><p><strong>outfile</strong> – optional output file to receive contents</p></li>
<li><p><strong>encoding</strong> – encoding for writing outfile</p></li>
<li><p><strong>xlate</strong> – convert data from EBCDIC to ASCII (option)
specify name for dataset of the form hlq.&lt;xlate&gt;.TCPXLBIN</p></li>
<li><p><strong>cmp</strong> – if set to true: compare file gotten with the outfile</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if contents of file ‘filename’ same as file ‘outfile’
and cmp == True else False</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.getjob">
<code class="sig-name descname">getjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">jobid</span></em>, <em class="sig-param"><span class="n">outfile</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.getjob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.getjob" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies job output to outfile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jobid</strong> – JOBID.X for complete spool output or
JOBID.n for individual spool files
e.g. JOB12345.X or JOB12345.1</p></li>
<li><p><strong>outfile</strong> – optional output file to receive contents</p></li>
</ul>
</dd>
<dt class="field-even">Returns filename</dt>
<dd class="field-even"><p>file name of output file</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.getjoblines">
<code class="sig-name descname">getjoblines</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">outfile</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.getjoblines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.getjoblines" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Generator function if no outfile specified</dt><dd><p>yields a line</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – JOBID.X for complete spool output or
JOBID.n for individual spool files
e.g. JOB12345.X or JOB12345.1</p></li>
<li><p><strong>outfile</strong> – optional output file to receive contents</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.getlines">
<code class="sig-name descname">getlines</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.getlines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.getlines" title="Permalink to this definition">¶</a></dt>
<dd><p>generator function yields a line read from sequential file or
PDS member specified by filename</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> – read file or pds member</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.listjob">
<code class="sig-name descname">listjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">jobid</span></em>, <em class="sig-param"><span class="n">jobowner</span><span class="o">=</span><span class="default_value">'*'</span></em>, <em class="sig-param"><span class="n">jobstat</span><span class="o">=</span><span class="default_value">'ALL'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.listjob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.listjob" title="Permalink to this definition">¶</a></dt>
<dd><p>List specific job given by jobid
:param jobid: job id e.g. ‘JOB12345’
:param jobowner: job owner
:param jobstat: job status: one of ALL, OUTPUT or ACTIVE
:returns: jobstatus namedtuple and spoolfiles namedtuples</p>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.memberinfo">
<code class="sig-name descname">memberinfo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dsn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.memberinfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.memberinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>returns plain pds member directory listing for .mirrorinfo</p>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.memberlines">
<code class="sig-name descname">memberlines</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dsn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.memberlines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.memberlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator function returns the member lines of a PDS (= directory list)
:param dsn:  dataset name of a PDS or PDSE</p>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.members">
<code class="sig-name descname">members</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dsn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.members"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.members" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator function returns Member namedtuple (name, changed, size, userid)
:param dir:  dataset name of a PDS or PDSE</p>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.pdsnames">
<code class="sig-name descname">pdsnames</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dsnprefix</span></em>, <em class="sig-param"><span class="n">recfm</span><span class="o">=</span><span class="default_value">'FB'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.pdsnames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.pdsnames" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over datasets starting with prefix and return only PDS or PDSE datasets</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dsnprefix</strong> – Dataset prefix - single quoted</p></li>
<li><p><strong>recfm</strong> – filter special datasets  (e.g. ‘?B’ selects ‘FB’ or VB’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.storemember">
<code class="sig-name descname">storemember</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pds</span></em>, <em class="sig-param"><span class="n">fname</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.storemember"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.storemember" title="Permalink to this definition">¶</a></dt>
<dd><p>upload file to pds member
:param pds: partitioned dataset name
:param fname: file in current directory to be uploaded to pds</p>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.submit">
<code class="sig-name descname">submit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.submit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>submit job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>f</strong> – opened file object with JCL to submit
Must be bytes type data (Latin1) in Python 3</p>
</dd>
<dt class="field-even">Return jobid</dt>
<dd class="field-even"><p>job number string e.g. JOB12345
or ‘’ of submit failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.submitWait">
<code class="sig-name descname">submitWait</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">jcl</span></em>, <em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">30</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.submitWait"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.submitWait" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jcl</strong> – dataset or pds(member) containting JCL to submit</p></li>
<li><p><strong>wait</strong> – wait time in seconds until function is to return</p></li>
</ul>
</dd>
<dt class="field-even">Return Job</dt>
<dd class="field-even"><p>Job object containing information on Job submitted
or None</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fz</span><span class="o">=</span><span class="n">ftptoolz</span><span class="o">.</span><span class="n">Ftpzos</span><span class="p">(</span><span class="s1">&#39;zibm&#39;</span><span class="p">,</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span><span class="s1">&#39;pw&#39;</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">=</span><span class="n">fz</span><span class="o">.</span><span class="n">submitWait</span><span class="p">(</span><span class="s2">&quot;&#39;mm.jobs(copyy)&#39;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">cc</span>
<span class="go">&#39;AE37&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.ftptoolz.Ftpzos.touchmembers">
<code class="sig-name descname">touchmembers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pds</span></em>, <em class="sig-param"><span class="n">membertimes</span></em>, <em class="sig-param"><span class="n">touchtemplate</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Ftpzos.touchmembers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Ftpzos.touchmembers" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Submit TOUCH job to set modification times in members of a</dt><dd><p>partitioned dataset.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pds</strong> – partitioned dataset name</p></li>
<li><p><strong>membertimes</strong> – list of (membername, modtime, uid, size) tuples
modtime is of datetime type or
of string ‘yyyymmdd.HHMMSS’</p></li>
<li><p><strong>touchtemplate</strong> – Touch template job skeleton
(see touchtemplate_sample for further
details</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="adapya.base.ftptoolz.Job">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.ftptoolz.</code><code class="sig-name descname">Job</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">jobid</span></em>, <em class="sig-param"><span class="n">jcl</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#Job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.Job" title="Permalink to this definition">¶</a></dt>
<dd><p>stores the JES job information</p>
</dd></dl>

<dl class="py class">
<dt id="adapya.base.ftptoolz.Jobstatus">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.ftptoolz.</code><code class="sig-name descname">Jobstatus</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">jobname</span></em>, <em class="sig-param"><span class="n">jobid</span></em>, <em class="sig-param"><span class="n">owner</span></em>, <em class="sig-param"><span class="n">status</span></em>, <em class="sig-param"><span class="n">cl</span></em>, <em class="sig-param"><span class="n">cc</span></em>, <em class="sig-param"><span class="n">numspool</span></em>, <em class="sig-param"><span class="n">cputime</span></em>, <em class="sig-param"><span class="n">elapsed</span></em>, <em class="sig-param"><span class="n">stepname</span></em>, <em class="sig-param"><span class="n">procname</span></em><span class="sig-paren">)</span><a class="headerlink" href="#adapya.base.ftptoolz.Jobstatus" title="Permalink to this definition">¶</a></dt>
<dd><p>The namedtuple Jobstatus describes the jobstatus in z/OS as returned from ftp</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Jobstatus</span><span class="p">(</span><span class="s1">&#39;MMP8&#39;</span><span class="p">,</span><span class="s1">&#39;JOB23114&#39;</span><span class="p">,</span><span class="s1">&#39;ACF2STC&#39;</span><span class="p">,</span><span class="s1">&#39;OUTPUT&#39;</span><span class="p">,</span><span class="s1">&#39;K&#39;</span><span class="p">,</span><span class="s1">&#39;0000&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>                                                <span class="ow">or</span> <span class="s1">&#39;A000&#39;</span> <span class="k">if</span> <span class="n">abend</span>
</pre></div>
</div>
<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Jobstatus.cc">
<code class="sig-name descname">cc</code><a class="headerlink" href="#adapya.base.ftptoolz.Jobstatus.cc" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 5</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Jobstatus.cl">
<code class="sig-name descname">cl</code><a class="headerlink" href="#adapya.base.ftptoolz.Jobstatus.cl" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Jobstatus.cputime">
<code class="sig-name descname">cputime</code><a class="headerlink" href="#adapya.base.ftptoolz.Jobstatus.cputime" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 7</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Jobstatus.elapsed">
<code class="sig-name descname">elapsed</code><a class="headerlink" href="#adapya.base.ftptoolz.Jobstatus.elapsed" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 8</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Jobstatus.jobid">
<code class="sig-name descname">jobid</code><a class="headerlink" href="#adapya.base.ftptoolz.Jobstatus.jobid" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Jobstatus.jobname">
<code class="sig-name descname">jobname</code><a class="headerlink" href="#adapya.base.ftptoolz.Jobstatus.jobname" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Jobstatus.numspool">
<code class="sig-name descname">numspool</code><a class="headerlink" href="#adapya.base.ftptoolz.Jobstatus.numspool" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 6</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Jobstatus.owner">
<code class="sig-name descname">owner</code><a class="headerlink" href="#adapya.base.ftptoolz.Jobstatus.owner" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Jobstatus.procname">
<code class="sig-name descname">procname</code><a class="headerlink" href="#adapya.base.ftptoolz.Jobstatus.procname" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 10</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Jobstatus.status">
<code class="sig-name descname">status</code><a class="headerlink" href="#adapya.base.ftptoolz.Jobstatus.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Jobstatus.stepname">
<code class="sig-name descname">stepname</code><a class="headerlink" href="#adapya.base.ftptoolz.Jobstatus.stepname" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 9</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="adapya.base.ftptoolz.Member">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.ftptoolz.</code><code class="sig-name descname">Member</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">changed</span></em>, <em class="sig-param"><span class="n">size</span></em>, <em class="sig-param"><span class="n">userid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#adapya.base.ftptoolz.Member" title="Permalink to this definition">¶</a></dt>
<dd><p>The namedtuple Member describes the member information in a directory listing
of a partitioned dataset (PDS).</p>
<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Member.changed">
<code class="sig-name descname">changed</code><a class="headerlink" href="#adapya.base.ftptoolz.Member.changed" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Member.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#adapya.base.ftptoolz.Member.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Member.size">
<code class="sig-name descname">size</code><a class="headerlink" href="#adapya.base.ftptoolz.Member.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Member.userid">
<code class="sig-name descname">userid</code><a class="headerlink" href="#adapya.base.ftptoolz.Member.userid" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="adapya.base.ftptoolz.ReusedSslSocket">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.ftptoolz.</code><code class="sig-name descname">ReusedSslSocket</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#ReusedSslSocket"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.ReusedSslSocket" title="Permalink to this definition">¶</a></dt>
<dd><p>Additional fix <a class="reference external" href="https://bugs.python.org/issue31727">https://bugs.python.org/issue31727</a></p>
<dl class="py method">
<dt id="adapya.base.ftptoolz.ReusedSslSocket.unwrap">
<code class="sig-name descname">unwrap</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#ReusedSslSocket.unwrap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.ReusedSslSocket.unwrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the SSL shutdown handshake.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="adapya.base.ftptoolz.Spoolfile">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.ftptoolz.</code><code class="sig-name descname">Spoolfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">id</span></em>, <em class="sig-param"><span class="n">stepname</span></em>, <em class="sig-param"><span class="n">procstep</span></em>, <em class="sig-param"><span class="n">cl</span></em>, <em class="sig-param"><span class="n">ddname</span></em>, <em class="sig-param"><span class="n">numbytes</span></em><span class="sig-paren">)</span><a class="headerlink" href="#adapya.base.ftptoolz.Spoolfile" title="Permalink to this definition">¶</a></dt>
<dd><p>The namedtuple Spoolfile describes the a JES spool file in z/OS as returned from ftp</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Spoolfile</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;JES2&#39;</span><span class="p">,</span><span class="s1">&#39;STEP1&#39;</span><span class="p">,</span><span class="s1">&#39;X&#39;</span><span class="p">,</span><span class="s1">&#39;JESJCL&#39;</span><span class="p">,</span><span class="mi">7362</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Spoolfile.cl">
<code class="sig-name descname">cl</code><a class="headerlink" href="#adapya.base.ftptoolz.Spoolfile.cl" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Spoolfile.ddname">
<code class="sig-name descname">ddname</code><a class="headerlink" href="#adapya.base.ftptoolz.Spoolfile.ddname" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Spoolfile.id">
<code class="sig-name descname">id</code><a class="headerlink" href="#adapya.base.ftptoolz.Spoolfile.id" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Spoolfile.numbytes">
<code class="sig-name descname">numbytes</code><a class="headerlink" href="#adapya.base.ftptoolz.Spoolfile.numbytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 5</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Spoolfile.procstep">
<code class="sig-name descname">procstep</code><a class="headerlink" href="#adapya.base.ftptoolz.Spoolfile.procstep" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py attribute">
<dt id="adapya.base.ftptoolz.Spoolfile.stepname">
<code class="sig-name descname">stepname</code><a class="headerlink" href="#adapya.base.ftptoolz.Spoolfile.stepname" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="adapya.base.ftptoolz.getasmdate">
<code class="sig-prename descclassname">adapya.base.ftptoolz.</code><code class="sig-name descname">getasmdate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#getasmdate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.getasmdate" title="Permalink to this definition">¶</a></dt>
<dd><p>find execution date in a line of an assembly or binder listing
:param line:
:returns date: date is a string of format YYYYMMDD.hhmm00</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.ftptoolz.writedict">
<code class="sig-prename descclassname">adapya.base.ftptoolz.</code><code class="sig-name descname">writedict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dict</span></em>, <em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#writedict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.writedict" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a dictionary to a file in a way that can be read back using
rval() but is still somewhat readable (i.e. not a single long line).
Also creates a backup file.</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.ftptoolz.writejson">
<code class="sig-prename descclassname">adapya.base.ftptoolz.</code><code class="sig-name descname">writejson</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dict</span></em>, <em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/ftptoolz.html#writejson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.ftptoolz.writejson" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a dict as json file</p>
</dd></dl>

</div>
</div>
<span class="target" id="module-adapya.base.jconfig"></span><div class="section" id="jconfig-manage-configuration-data-in-a-json-file">
<h2>jconfig - Manage configuration data in a JSON file<a class="headerlink" href="#jconfig-manage-configuration-data-in-a-json-file" title="Permalink to this headline">¶</a></h2>
<p>The default file name is .ztools located in the USERPROFILE/APPDATA/HOME directory.</p>
<dl class="py data">
<dt id="adapya.base.jconfig.CFGFN">
<code class="sig-prename descclassname">adapya.base.jconfig.</code><code class="sig-name descname">CFGFN</code><em class="property"> = '.ztools'</em><a class="headerlink" href="#adapya.base.jconfig.CFGFN" title="Permalink to this definition">¶</a></dt>
<dd><p>default config file name</p>
</dd></dl>

<dl class="py data">
<dt id="adapya.base.jconfig.SHOWCONFIG">
<code class="sig-prename descclassname">adapya.base.jconfig.</code><code class="sig-name descname">SHOWCONFIG</code><em class="property"> = 1</em><a class="headerlink" href="#adapya.base.jconfig.SHOWCONFIG" title="Permalink to this definition">¶</a></dt>
<dd><p>indicator to request display of the settings in getparms() and setparms()</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.jconfig.get">
<code class="sig-prename descclassname">adapya.base.jconfig.</code><code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">cf</span><span class="o">=</span><span class="default_value">'.ztools'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/jconfig.html#get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.jconfig.get" title="Permalink to this definition">¶</a></dt>
<dd><p>get subject from config JSON file
:param name: subject dictionary
:param cf: config file name</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.jconfig.getparms">
<code class="sig-prename descclassname">adapya.base.jconfig.</code><code class="sig-name descname">getparms</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subject</span></em>, <em class="sig-param"><span class="n">show</span></em>, <em class="sig-param"><span class="n">cf</span><span class="o">=</span><span class="default_value">'.ztools'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">parms</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/jconfig.html#getparms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.jconfig.getparms" title="Permalink to this definition">¶</a></dt>
<dd><p>get for a subject configuration data unless
provided by parameter values in parms
:param subject: select parameters by subject e.g. ‘ftp’
:param parms: parameters that are requested
:param show:  if &gt; 0: print parameters</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">setparms</span><span class="p">(</span><span class="s1">&#39;ftp&#39;</span><span class="p">,</span><span class="kc">False</span><span class="p">,</span><span class="n">cf</span><span class="o">=</span><span class="s1">&#39;.test&#39;</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;big&#39;</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="s1">&#39;secret&#39;</span><span class="p">,</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;hugo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">getparms</span><span class="p">(</span><span class="s1">&#39;ftp&#39;</span><span class="p">,</span><span class="kc">False</span><span class="p">,</span><span class="n">cf</span><span class="o">=</span><span class="s1">&#39;.test&#39;</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="go">{&#39;host&#39;: &#39;big&#39;, &#39;password&#39;: &#39;secret&#39;, &#39;user&#39;: &#39;hugo&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.jconfig.set">
<code class="sig-prename descclassname">adapya.base.jconfig.</code><code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">cf</span><span class="o">=</span><span class="default_value">'.ztools'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/jconfig.html#set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.jconfig.set" title="Permalink to this definition">¶</a></dt>
<dd><p>set subject in config JSON file
:param name: subject dictionary
:param cf: config file name</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.jconfig.setparms">
<code class="sig-prename descclassname">adapya.base.jconfig.</code><code class="sig-name descname">setparms</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subject</span></em>, <em class="sig-param"><span class="n">show</span></em>, <em class="sig-param"><span class="n">cf</span><span class="o">=</span><span class="default_value">'.ztools'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">parms</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/jconfig.html#setparms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.jconfig.setparms" title="Permalink to this definition">¶</a></dt>
<dd><p>Set configuration parameters for a subject</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subject</strong> – select parameters by subject e.g. ‘ftp’</p></li>
<li><p><strong>parms</strong> – parameter that should be set
If the value of a parameter is None it is ignored.
This simplifies setting up call: no dynamic creation
of parms dictionary needed.</p></li>
<li><p><strong>show</strong> – if True print parameters</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">setparms</span><span class="p">(</span><span class="s1">&#39;ftp&#39;</span><span class="p">,</span><span class="kc">True</span><span class="p">,</span><span class="n">cf</span><span class="o">=</span><span class="s1">&#39;.test&#39;</span><span class="p">,</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;Anna&#39;</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="s1">&#39;H2o&#39;</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;mojave&#39;</span><span class="p">)</span>
<span class="go">The following configuration is stored in &#39;.test&#39; for &#39;ftp&#39;:</span>
<span class="go">           host: mojave</span>
<span class="go">       password: *password*</span>
<span class="go">           user: Anna</span>
</pre></div>
</div>
</dd></dl>

</div>
<span class="target" id="module-adapya.base.recordio"></span><div class="section" id="recordio-read-and-write-records">
<h2>recordio - read and write records<a class="headerlink" href="#recordio-read-and-write-records" title="Permalink to this headline">¶</a></h2>
<p>The module recordio contains functions to read or write records with special
structures (variable, variable blocked):</p>
<blockquote>
<div><ul class="simple">
<li><p>RDW   records preceded by a record descriptor word</p></li>
<li><p>BDW   variable records blocked</p></li>
<li><dl class="simple">
<dt>EXCL4 records preceded by a 4 bytes exclusive record length</dt><dd><p>in native byte-order)</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<dl class="py function">
<dt id="adapya.base.recordio.readrec">
<code class="sig-prename descclassname">adapya.base.recordio.</code><code class="sig-name descname">readrec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">recform</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">dumphdr</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">numrec</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">skiprec</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">ecodec</span><span class="o">=</span><span class="default_value">'cp037'</span></em>, <em class="sig-param"><span class="n">debug</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">into</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/recordio.html#readrec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.recordio.readrec" title="Permalink to this definition">¶</a></dt>
<dd><p>readrec - Generator function to read records
with special record format specified in recform</p>
<blockquote>
<div><dl class="field-list">
<dt class="field-odd">param f</dt>
<dd class="field-odd"><p>filehandle of open file</p>
</dd>
<dt class="field-even">param recform</dt>
<dd class="field-even"><p>record format to process</p>
<ul>
<li><dl class="simple">
<dt>‘RDW’ variable record format (2 bytes length, Network byte order)</dt><dd><p>return record without RDW header (exclusive)</p>
</dd>
</dl>
</li>
<li><dl>
<dt>‘RDW+’ variable record format (2 bytes length, Network byte order)</dt><dd><p>return record including RDW header</p>
<dl class="simple">
<dt>Note: for segmented records rlen in RDW header is length</dt><dd><p>of first segment and not the whole record</p>
</dd>
</dl>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>‘BDW’ variable record blocked: input includes Block Descriptor Word</dt><dd><p>which is skipped
return record without RDW header (exclusive)</p>
</dd>
</dl>
</li>
<li><p>‘BDW+’ same as BDW but return record including RDW header</p></li>
<li><p>‘EXCL4’ exclusive 4 bytes length, native byte order</p></li>
</ul>
</dd>
<dt class="field-odd">param dumphdr</dt>
<dd class="field-odd"><p>header text of record; if not empty: prints record</p>
</dd>
<dt class="field-even">param ecodec</dt>
<dd class="field-even"><p>Ebcdic codec for character interpretation when dumping records</p>
</dd>
<dt class="field-odd">param debug</dt>
<dd class="field-odd"><p>1 - print RDW information</p>
</dd>
<dt class="field-even">param into</dt>
<dd class="field-even"><p>1 - read into and return modifyable bytearray rather that bytes
(only for non segemented RDW files)</p>
</dd>
</dl>
</div></blockquote>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span> <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">readrec</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">recform</span><span class="o">=</span><span class="s1">&#39;RDW&#39;</span><span class="p">,</span><span class="n">dumphdr</span><span class="o">=</span><span class="s1">&#39;my_records&#39;</span><span class="p">):</span>
<span class="o">&gt;&gt;</span>    <span class="n">process</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.recordio.writerec">
<code class="sig-prename descclassname">adapya.base.recordio.</code><code class="sig-name descname">writerec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">record</span></em>, <em class="sig-param"><span class="n">isn</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">recform</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/recordio.html#writerec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.recordio.writerec" title="Permalink to this definition">¶</a></dt>
<dd><p>writerec - function to write records with special record format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – filehandle of open file</p></li>
<li><p><strong>record</strong> – record string/bytearray to be written</p></li>
<li><p><strong>isn</strong> – prefix record with an 4 byte integer in Network byte order</p></li>
<li><p><strong>recform</strong> – <p>record format to process:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="s1">&#39;RDW&#39;</span> <span class="n">variable</span> <span class="n">record</span> <span class="nb">format</span><span class="p">:</span>
</pre></div>
</div>
<blockquote>
<div><p>2 bytes length, 2 bytes emtpy in Network byte order</p>
</div></blockquote>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-adapya.base.smfrecordz"></span><dl class="py class">
<dt id="adapya.base.smfrecordz.Smf">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.smfrecordz.</code><code class="sig-name descname">Smf</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/smfrecordz.html#Smf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.smfrecordz.Smf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="adapya.base.smfrecordz.Smf30">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.smfrecordz.</code><code class="sig-name descname">Smf30</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/smfrecordz.html#Smf30"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.smfrecordz.Smf30" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="adapya.base.smfrecordz.Smf30cas">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.smfrecordz.</code><code class="sig-name descname">Smf30cas</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/smfrecordz.html#Smf30cas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.smfrecordz.Smf30cas" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="adapya.base.smfrecordz.Smf30id">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.smfrecordz.</code><code class="sig-name descname">Smf30id</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/smfrecordz.html#Smf30id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.smfrecordz.Smf30id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="adapya.base.smfrecordz.Smf30prf">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.smfrecordz.</code><code class="sig-name descname">Smf30prf</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/smfrecordz.html#Smf30prf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.smfrecordz.Smf30prf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="adapya.base.smfrecordz.Smf30pss">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.smfrecordz.</code><code class="sig-name descname">Smf30pss</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/smfrecordz.html#Smf30pss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.smfrecordz.Smf30pss" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="adapya.base.smfrecordz.dtime100">
<code class="sig-prename descclassname">adapya.base.smfrecordz.</code><code class="sig-name descname">dtime100</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">i</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/smfrecordz.html#dtime100"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.smfrecordz.dtime100" title="Permalink to this definition">¶</a></dt>
<dd><p>return readable time since midnight 1/100 sec precision</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.smfrecordz.i2dt">
<code class="sig-prename descclassname">adapya.base.smfrecordz.</code><code class="sig-name descname">i2dt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">idat</span></em>, <em class="sig-param"><span class="n">itim</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/smfrecordz.html#i2dt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.smfrecordz.i2dt" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert industry date time to datetime object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idat</strong> – integer IBM industry date 0cyyddd</p></li>
<li><p><strong>itim</strong> – integer IBM time in 100ths of a second in day</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.smfrecordz.idate">
<code class="sig-prename descclassname">adapya.base.smfrecordz.</code><code class="sig-name descname">idate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">i</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/smfrecordz.html#idate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.smfrecordz.idate" title="Permalink to this definition">¶</a></dt>
<dd><p>Return string from IBM date 0cyyddd</p>
</dd></dl>

<span class="target" id="module-adapya.base.stck"></span><div class="section" id="stck-stck-timestamp-format-conversion-routines">
<h2>stck - STCK timestamp format conversion routines<a class="headerlink" href="#stck-stck-timestamp-format-conversion-routines" title="Permalink to this headline">¶</a></h2>
<p>The module stck.py contains functions for converting timestamp
values in STCK format (used on IBM mainframe computers).</p>
<dl class="py class">
<dt id="adapya.base.stck.Utc">
<em class="property">class </em><code class="sig-prename descclassname">adapya.base.stck.</code><code class="sig-name descname">Utc</code><a class="reference internal" href="_modules/adapya/base/stck.html#Utc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.stck.Utc" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="adapya.base.stck.Utc.dst">
<code class="sig-name descname">dst</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dt</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/stck.html#Utc.dst"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.stck.Utc.dst" title="Permalink to this definition">¶</a></dt>
<dd><p>datetime -&gt; DST offset as timedelta positive east of UTC.</p>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.stck.Utc.tzname">
<code class="sig-name descname">tzname</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dt</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/stck.html#Utc.tzname"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.stck.Utc.tzname" title="Permalink to this definition">¶</a></dt>
<dd><p>datetime -&gt; string name of time zone.</p>
</dd></dl>

<dl class="py method">
<dt id="adapya.base.stck.Utc.utcoffset">
<code class="sig-name descname">utcoffset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dt</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/stck.html#Utc.utcoffset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.stck.Utc.utcoffset" title="Permalink to this definition">¶</a></dt>
<dd><p>datetime -&gt; timedelta showing offset from UTC, negative values indicating West of UTC</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="adapya.base.stck.csec">
<code class="sig-prename descclassname">adapya.base.stck.</code><code class="sig-name descname">csec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stcksec</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/stck.html#csec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.stck.csec" title="Permalink to this definition">¶</a></dt>
<dd><p>returns seconds converted from stck seconds</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">csec</span><span class="p">(</span><span class="mh">0xd69</span><span class="p">)</span>
<span class="go">3599.761408</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.stck.cstck">
<code class="sig-prename descclassname">adapya.base.stck.</code><code class="sig-name descname">cstck</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stck</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/stck.html#cstck"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.stck.cstck" title="Permalink to this definition">¶</a></dt>
<dd><p>returns seconds_since_1970</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.stck.cstckd">
<code class="sig-prename descclassname">adapya.base.stck.</code><code class="sig-name descname">cstckd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stckd</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/stck.html#cstckd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.stck.cstckd" title="Permalink to this definition">¶</a></dt>
<dd><p>converts long STCK time into local time and microseconds</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.stck.leap4dt">
<code class="sig-prename descclassname">adapya.base.stck.</code><code class="sig-name descname">leap4dt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dt</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/stck.html#leap4dt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.stck.leap4dt" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the leap seconds for a given datetime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dt</strong> – datetime value</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>leap seconds</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">leap4dt</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">1972</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span><span class="mi">59</span><span class="p">,</span><span class="mi">59</span><span class="p">))</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leap4dt</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="go">27</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.stck.sstck">
<code class="sig-prename descclassname">adapya.base.stck.</code><code class="sig-name descname">sstck</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stck</span></em>, <em class="sig-param"><span class="n">gmt</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/stck.html#sstck"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.stck.sstck" title="Permalink to this definition">¶</a></dt>
<dd><p>returns ISO date time string from local stck
if gmt !=0: GMT STCK is assumed</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.stck.sstckd">
<code class="sig-prename descclassname">adapya.base.stck.</code><code class="sig-name descname">sstckd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stckd</span></em>, <em class="sig-param"><span class="n">gmt</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/stck.html#sstckd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.stck.sstckd" title="Permalink to this definition">¶</a></dt>
<dd><p>converts long STCK time into string
of local time and microseconds
if gmt !=0: GMT STCK is assumed</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.stck.sstckgmt">
<code class="sig-prename descclassname">adapya.base.stck.</code><code class="sig-name descname">sstckgmt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stck</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/stck.html#sstckgmt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.stck.sstckgmt" title="Permalink to this definition">¶</a></dt>
<dd><p>returns ISO date time string assuming gmt stck value</p>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.stck.stimet">
<code class="sig-prename descclassname">adapya.base.stck.</code><code class="sig-name descname">stimet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timet</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/stck.html#stimet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.stck.stimet" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Convert time_t value into datetime string, allows negative values.</dt><dd><p>Supports datetimes between 1900-01-01 and 9999-12-31</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stimet</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="mi">70</span><span class="o">*</span><span class="mi">365</span><span class="o">+</span><span class="mi">17</span><span class="p">)</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">3600</span><span class="p">)</span>
<span class="go">&#39;1900-01-01 00:00:00 UTC (+0000)&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stimet</span><span class="p">((</span><span class="mi">8035</span><span class="o">*</span><span class="mi">365</span><span class="o">+</span><span class="mi">121</span><span class="p">)</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">3600</span><span class="o">+</span><span class="mi">23</span><span class="o">*</span><span class="mi">3600</span><span class="o">+</span><span class="mi">3599</span><span class="p">)</span>
<span class="go">&#39;9999-12-31 23:59:59 UTC (+0000)&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.stck.utc2stckd">
<code class="sig-prename descclassname">adapya.base.stck.</code><code class="sig-name descname">utc2stckd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dt</span><span class="o">=</span><span class="default_value">datetime.datetime(2023, 12, 7, 21, 25, 53, 567696)</span></em>, <em class="sig-param"><span class="n">leapsec</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/stck.html#utc2stckd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.stck.utc2stckd" title="Permalink to this definition">¶</a></dt>
<dd><p>convert a datetime to STCK format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dt</strong> – datetime value to convert to STCK (detault now)</p></li>
<li><p><strong>leapsec</strong> – if True add in leap seconds relevant for
the datetime dt</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-adapya.base.touch"></span><div class="section" id="touch-set-modification-time-of-file-s">
<h2>touch - set modification time of file(s)<a class="headerlink" href="#touch-set-modification-time-of-file-s" title="Permalink to this headline">¶</a></h2>
<p>The program works in 2 ways:</p>
<ul>
<li><p>with option -m:</p>
<p>Find .mirrorinfo in current directory or subdirectory
for each file in sub-/directory get its modifcation date
from .mirrorinfo and set the file to this date</p>
<ul class="simple">
<li><p>This can be used after SVN checkout where the mod. dates
need to be reset from the checkin to the original date</p></li>
<li><p>The .mirrorinfo is created by the ftpmirroz.py ftpz.py programs
a default extension ‘.s’ is expected for the local files
for comparison with the members listed in .mirrorinfo the extension
is removed and the filename is upper cased</p></li>
</ul>
</li>
<li><p>with file_name and optional date/time:</p>
<p>Sets file to current or given date/time</p>
</li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">touch</span><span class="o">.</span><span class="n">py</span> <span class="n">file_name</span> <span class="p">[</span><span class="n">yyyy</span><span class="o">-</span><span class="n">mm</span><span class="o">-</span><span class="n">dd</span> <span class="p">[</span><span class="n">HH</span><span class="p">:</span><span class="n">MM</span><span class="p">:</span><span class="n">SS</span><span class="p">]]</span>

                <span class="n">Other</span> <span class="n">date</span><span class="o">/</span><span class="n">time</span> <span class="n">forms</span><span class="p">:</span>
                   <span class="n">date</span><span class="p">:</span>  <span class="n">yyyy</span><span class="o">/</span><span class="n">mm</span><span class="o">/</span><span class="n">dd</span>
                   <span class="n">time</span><span class="p">:</span>  <span class="n">HH</span><span class="p">:</span><span class="n">MM</span>

<span class="n">touch</span><span class="o">.</span><span class="n">py</span> <span class="p">[</span><span class="o">-</span><span class="n">m</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">v</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">x</span> <span class="o">.</span><span class="n">ext</span><span class="p">]</span>

<span class="o">-</span><span class="n">m</span> <span class="n">mirrorinfo</span>  <span class="nb">set</span> <span class="n">dates</span> <span class="n">according</span> <span class="n">to</span> <span class="o">.</span><span class="n">mirrorinfo</span>
               <span class="n">Either</span> <span class="o">.</span><span class="n">mirrorinfo</span> <span class="ow">is</span> <span class="n">on</span> <span class="n">current</span> <span class="n">directory</span> <span class="ow">or</span>
               <span class="ow">in</span> <span class="nb">next</span> <span class="n">lower</span> <span class="n">subdirectory</span>
<span class="o">-</span><span class="n">v</span> <span class="n">verbose</span>
<span class="o">-</span><span class="n">x</span> <span class="n">extension</span>   <span class="n">default</span> <span class="n">extension</span> <span class="ow">is</span> <span class="s1">&#39;.s&#39;</span>
</pre></div>
</div>
<dl class="py function">
<dt id="adapya.base.touch.ftouch">
<code class="sig-prename descclassname">adapya.base.touch.</code><code class="sig-name descname">ftouch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">newtime</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/touch.html#ftouch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.touch.ftouch" title="Permalink to this definition">¶</a></dt>
<dd><p>Set new <strong>modified</strong> time for given file.
Supports Unix and Windows (with win32 installed)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – file to be modified</p></li>
<li><p><strong>newtime</strong> – new time stamp to be set</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="adapya.base.touch.get_mirrorinfo_dict">
<code class="sig-prename descclassname">adapya.base.touch.</code><code class="sig-name descname">get_mirrorinfo_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/adapya/base/touch.html#get_mirrorinfo_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#adapya.base.touch.get_mirrorinfo_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Read mirrorinfo. file containing the PDS directory
and return it as dictionary. The .mirrorinfo file is
produced by ftpmirroz.py)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – path without file name</p>
</dd>
<dt class="field-even">Return info</dt>
<dd class="field-even"><p>dictionary with PDS directory lines for each member key.
If not .mirrorinfo not found return empty dict</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="indices.html" class="btn btn-neutral float-right" title="Indices" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="scripts.html" class="btn btn-neutral float-left" title="Scripts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2004-2023, software AG.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>